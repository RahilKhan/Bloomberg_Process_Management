 /* creating database Bloomberg Process Management */
 create database bpm;


/* creating Tables */
CREATE TABLE IF NOT EXISTS `bpm`.`curr_iso_map` (
  `CURRENCY_ISO_CODE` varchar(10) NOT NULL,
  `COUNTRY` varchar(45) NOT NULL,
  `EXCHANGE_RATE_DOLLAR` decimal(10,2) NOT NULL,
  `CURR_ISO_MAP_ID` varchar(45) NOT NULL,
  `ADM_FLAG` varchar(1) NOT NULL,
  PRIMARY KEY (`CURR_ISO_MAP_ID`),
  UNIQUE KEY `CURRENCY_ISO_CODE_UNIQUE` (`CURRENCY_ISO_CODE`)
); 

CREATE TABLE IF NOT EXISTS `bpm`.`DEALS` (
  `DEAL_ID` INT NOT NULL,
  `ORDER_CURR_ISO` VARCHAR(45) NULL,
  `RECEPIENT_CURR_ISO` VARCHAR(45) NULL,
  `DEAL_TIMESTAMP` VARCHAR(45) NULL,
  `DEAL_AMT_IN_ORDER_CURR_ISO` VARCHAR(45) NULL,
  PRIMARY KEY (`DEAL_ID`));


CREATE TABLE IF NOT EXISTS `bpm`.`DEALS_CSV_IMPORT` (
  `DEAL_ID` INT NOT NULL,
  `ORDER_CURR_ISO` VARCHAR(45) NULL,
  `RECEPIENT_CURR_ISO` VARCHAR(45) NULL,
  `DEAL_TIMESTAMP` VARCHAR(45) NULL,
  `DEAL_AMT_IN_ORDER_CURR_ISO` VARCHAR(45) NULL,
  PRIMARY KEY (`DEAL_ID`));


CREATE TABLE IF NOT EXISTS `bpm`.`DEALS_CURR_COUNT` (
  `DEAL_ORDER_CURR` INT NOT NULL,
  `DEAL_COUNT` VARCHAR(45) NULL,
  PRIMARY KEY (`DEAL_ORDER_CURR`));


CREATE TABLE IF NOT EXISTS `bpm`.`DEALS_REJECTED_CSV_REC` (
  `DEAL_ID` INT NOT NULL,
  `ORDER_CURR_ISO` VARCHAR(45) NULL,
  `RECIPIENT_CURR_ISO` VARCHAR(45) NULL,
  `DEAL_TIMESTAMP` VARCHAR(45) NULL,
  `DEAL_AMT_IN_ORDER_CURR_ISO` VARCHAR(45) NULL,
  PRIMARY KEY (`DEAL_ID`));


CREATE TABLE IF NOT EXISTS `bpm`.`REJ_RECORDS_LOGS` (
  `DEAL_ID` INT NOT NULL,
  `TIMESTAMP` VARCHAR(45) NULL,
  `REJECT_REASON` VARCHAR(45) NULL,
  PRIMARY KEY (`DEAL_ID`));
  
  
  /*Inserting master data */
INSERT INTO `bpm`.`curr_iso_map`
(CURRENCY_ISO_CODE,COUNTRY,EXCHANGE_RATE_DOLLAR,CURR_ISO_MAP_ID,ADM_FLAG)
VALUES ('INR','INDIA',67,1000,'A');

INSERT INTO `bpm`.`curr_iso_map`
(CURRENCY_ISO_CODE,COUNTRY,EXCHANGE_RATE_DOLLAR,CURR_ISO_MAP_ID,ADM_FLAG)
VALUES ('USD','USA',1,1001,'A');

INSERT INTO `bpm`.`curr_iso_map`
(CURRENCY_ISO_CODE,COUNTRY,EXCHANGE_RATE_DOLLAR,CURR_ISO_MAP_ID,ADM_FLAG)
VALUES ('EURO','EUROPE',1.12,1002,'A');

INSERT INTO `bpm`.`curr_iso_map`
(CURRENCY_ISO_CODE,COUNTRY,EXCHANGE_RATE_DOLLAR,CURR_ISO_MAP_ID,ADM_FLAG)
VALUES ('AED','UAE',17.49,1003,'A');























